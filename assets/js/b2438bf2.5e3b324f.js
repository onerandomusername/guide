"use strict";(self.webpackChunkdisnake_guide=self.webpackChunkdisnake_guide||[]).push([[12],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return u}});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=a.createContext({}),c=function(e){var n=a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},m=function(e){var n=c(e.components);return a.createElement(d.Provider,{value:n},e.children)},l={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,s=e.originalType,d=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),p=c(t),u=o,h=p["".concat(d,".").concat(u)]||p[u]||l[u]||s;return t?a.createElement(h,i(i({ref:n},m),{},{components:t})):a.createElement(h,i({ref:n},m))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var s=t.length,i=new Array(s);i[0]=p;var r={};for(var d in n)hasOwnProperty.call(n,d)&&(r[d]=n[d]);r.originalType=e,r.mdxType="string"==typeof e?e:o,i[1]=r;for(var c=2;c<s;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},6872:function(e,n,t){t.r(n),t.d(n,{assets:function(){return m},contentTitle:function(){return d},default:function(){return f},frontMatter:function(){return r},metadata:function(){return c},toc:function(){return l}});var a=t(7462),o=t(3366),s=(t(7294),t(3905)),i=["components"],r={description:"They can be accessed via the textbox, and return the values the user submitted with the command."},d="Slash Commands",c={unversionedId:"interactions/slash-commands",id:"interactions/slash-commands",title:"Slash Commands",description:"They can be accessed via the textbox, and return the values the user submitted with the command.",source:"@site/docs/interactions/slash-commands.mdx",sourceDirName:"interactions",slug:"/interactions/slash-commands",permalink:"/interactions/slash-commands",editUrl:"https://github.com/DisnakeDev/guide/edit/main/guide/docs/interactions/slash-commands.mdx",tags:[],version:"current",lastUpdatedBy:"Abhigyan Trips",lastUpdatedAt:1646733927,formattedLastUpdatedAt:"3/8/2022",frontMatter:{description:"They can be accessed via the textbox, and return the values the user submitted with the command."},sidebar:"guideSidebar",previous:{title:"Interactions",permalink:"/interactions"},next:{title:"Message Components",permalink:"/interactions/message-components"}},m={},l=[{value:"Registering commands",id:"registering-commands",level:2},{value:"Global commands",id:"global-commands",level:3},{value:"Guild commands",id:"guild-commands",level:3},{value:"Responding to commands",id:"responding-to-commands",level:2},{value:"Sending responses",id:"sending-responses",level:3},{value:"Follow-ups",id:"follow-ups",level:3},{value:"Options and choices",id:"options-and-choices",level:2},{value:"Groups and subcommands",id:"groups-and-subcommands",level:2}],p=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.kt)("div",n)}},u=p("DiscordMessages"),h=p("DiscordMessage"),g=p("DiscordInteraction"),k=p("DocsLink"),v={toc:l};function f(e){var n=e.components,t=(0,o.Z)(e,i);return(0,s.kt)("wrapper",(0,a.Z)({},v,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"slash-commands"},"Slash Commands"),(0,s.kt)("p",null,"A ",(0,s.kt)("strong",{parentName:"p"},"slash command")," is one of the types of client-integrated interactions a bot can create. Unlike prefix commands, these do not require the message content intent."),(0,s.kt)("p",null,"This section will go in-depth on the creation, types and handling of slash commands with ",(0,s.kt)("inlineCode",{parentName:"p"},"disnake"),"."),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"A bot needs to be authorized with the ",(0,s.kt)("inlineCode",{parentName:"p"},"applications.commands")," scope in order to create slash commands in a guild."))),(0,s.kt)("p",null,"To create a slash command, you need to use the ",(0,s.kt)("inlineCode",{parentName:"p"},"@bot.slash_command")," decorator."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},'@bot.slash_command(\n    name="ping",\n    description="Returns websocket latency.",\n)\nasync def ping(inter: disnake.ApplicationCommandInteraction):\n    ...\n')),(0,s.kt)("br",null),(0,s.kt)(u,{mdxType:"DiscordMessages"},(0,s.kt)(h,{profile:"bot",mdxType:"DiscordMessage"},(0,s.kt)("div",{slot:"interactions"},(0,s.kt)(g,{profile:"user",command:"true",mdxType:"DiscordInteraction"},"ping")),"Pong!")),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"registering-commands"},"Registering commands"),(0,s.kt)("p",null,'Unlike prefix commands, slash commands must be registered in Discord first. Otherwise they won\'t pop up if you press "/".\nBy default, the library registers / updates your slash commands automatically.\nIt does so on bot start or when one or several cogs are unloaded / reloaded.'),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"The library doesn't make unnecessary API requests during this process.\nIf registered commands match the commands in your code, no API requests are made.\nOtherwise only one bulk overwrite request is done."))),(0,s.kt)("p",null,"If you want to disable the automatic registration, set the ",(0,s.kt)("inlineCode",{parentName:"p"},"sync_commands")," parameter of ",(0,s.kt)("inlineCode",{parentName:"p"},"commands.Bot")," to ",(0,s.kt)("inlineCode",{parentName:"p"},"False"),".\nIf you want to see how exactly the list of registered commands changes, set the ",(0,s.kt)("inlineCode",{parentName:"p"},"sync_commands_debug")," parameter to ",(0,s.kt)("inlineCode",{parentName:"p"},"True"),"."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},'bot = commands.Bot("!", sync_commands_debug=True)\n')),(0,s.kt)("p",null,"It will print which commands were added, edited, deleted or untouched. It also depends on your logging level."),(0,s.kt)("h3",{id:"global-commands"},"Global commands"),(0,s.kt)("p",null,"Global slash commands are visible everywhere, including your bot DMs.\nIf you don't specify the ",(0,s.kt)("inlineCode",{parentName:"p"},"test_guilds")," parameter of ",(0,s.kt)("inlineCode",{parentName:"p"},"commands.Bot"),", all your slash commands are global."),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"The first registration of global commands may take up to 1 hour.\nHowever, they show up instantly in the bot DMs."))),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"You don't have to keep your bot online this whole time. You can turn it off once ",(0,s.kt)("inlineCode",{parentName:"p"},"on_ready")," fires.\nOnce all commands have appeared, they show up instantly in any new guild."))),(0,s.kt)("h3",{id:"guild-commands"},"Guild commands"),(0,s.kt)("p",null,"If you specify the ",(0,s.kt)("inlineCode",{parentName:"p"},"test_guilds")," parameter of ",(0,s.kt)("inlineCode",{parentName:"p"},"commands.Bot"),", all slash commands in your code are no longer global.\nThe following code will register all slash commands only in 2 guilds:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},'bot = commands.Bot("!", test_guilds=[123456789, 987654321])  # guild IDs\n')),(0,s.kt)("p",null,"If you want to keep some of your slash commands global and make some of them local, specify the ",(0,s.kt)("inlineCode",{parentName:"p"},"guild_ids")," parameter of ",(0,s.kt)("inlineCode",{parentName:"p"},"@bot.slash_command()"),":"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},'bot = commands.Bot("!")\n\n\n@bot.slash_command()\nasync def global_command(inter):\n    """This command is visible everywhere"""\n    ...\n\n\n@bot.slash_command(guild_ids=[123456789])\nasync def local_command(inter):\n    """This command is visible in one guild"""\n    ...\n')),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Guild commands show up instantly after registration."))),(0,s.kt)("h2",{id:"responding-to-commands"},"Responding to commands"),(0,s.kt)("h3",{id:"sending-responses"},"Sending responses"),(0,s.kt)("p",null,"The ",(0,s.kt)(k,{reference:"disnake.Interaction.response",mdxType:"DocsLink"},"response")," attribute returns a ",(0,s.kt)(k,{reference:"disnake.InteractionResponse",mdxType:"DocsLink"},"InteractionResponse")," instance that has 4 usable methods. A response can ",(0,s.kt)("b",null,"only be done once"),". If you want to send secondary\nmessages, consider using a ",(0,s.kt)(k,{reference:"disnake.Interaction.followup",mdxType:"DocsLink"},"followup")," webhook instead."),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)(k,{reference:"disnake.InteractionResponse.send_message",mdxType:"DocsLink"},"send_message")," - Sends response message"),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)(k,{reference:"disnake.InteractionResponse.edit_message",mdxType:"DocsLink"},"edit_message")," - Edits original message, you're unable to use this in application command because there are no message while you responding"),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)(k,{reference:"disnake.InteractionResponse.defer",mdxType:"DocsLink"},"defer")," - Defers the interaction"),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)(k,{reference:"disnake.InteractionResponse.is_done",mdxType:"DocsLink"},"is_done")," - Indicates whether an interaction response has been done before")),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)(k,{reference:"disnake.InteractionResponse.defer",mdxType:"DocsLink"},"defer"),' works differently depending on the type of interaction. It creates "Bot is thinking..." message for application commands and doesn\'t throw "This interaction failed" if you\'re not going to respond to message components.')),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"If you're going to run long processes (more than 3 seconds) while responding, you must first defer the interaction. Then\nwhen your response is ready you can edit the message using ",(0,s.kt)(k,{reference:"disnake.InteractionResponse.edit_original_message",mdxType:"DocsLink"},"edit_original_message")," method."))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="example.py"',title:'"example.py"'},'@bot.slash_command()\nasync def ping(inter: ApplicationCommandInteraction):\n    await inter.response.send_message("Pong!")\n\n\n@bot.slash_command()\nasync def defer(inter: ApplicationCommandInteraction):\n    await inter.response.defer()\n    await asyncio.sleep(10)\n    await inter.edit_original_message("The wait is over, my comrades!")\n')),(0,s.kt)("h3",{id:"follow-ups"},"Follow-ups"),(0,s.kt)("p",null,"Often used when you need to send secondary messages after responding."),(0,s.kt)("h2",{id:"options-and-choices"},"Options and choices"),(0,s.kt)("h2",{id:"groups-and-subcommands"},"Groups and subcommands"))}f.isMDXComponent=!0}}]);